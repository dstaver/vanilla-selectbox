<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>log.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Ad.html">Ad</a><ul class='methods'><li data-type='method'><a href="Ad.html#display">display</a></li><li data-type='method'><a href="Ad.html#registerPlugin">registerPlugin</a></li><li data-type='method'><a href="Ad.html#registerPlugins">registerPlugins</a></li><li data-type='method'><a href="Ad.html#setReadyCondition">setReadyCondition</a></li><li data-type='method'><a href="Ad.html#waitForElementReady">waitForElementReady</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-adloader.html">adloader</a><ul class='methods'><li data-type='method'><a href="module-adloader.html#.init">init</a></li></ul></li><li><a href="module-ads.html">ads</a><ul class='methods'><li data-type='method'><a href="module-ads.html#.createAds">createAds</a></li><li data-type='method'><a href="module-ads.html#.getAdById">getAdById</a></li></ul></li><li><a href="module-gpt.html">gpt</a><ul class='methods'><li data-type='method'><a href="module-gpt.html#.addEventListeners">addEventListeners</a></li><li data-type='method'><a href="module-gpt.html#.configure">configure</a></li><li data-type='method'><a href="module-gpt.html#.defineSlot">defineSlot</a></li><li data-type='method'><a href="module-gpt.html#.display">display</a></li><li data-type='method'><a href="module-gpt.html#.enable">enable</a></li><li data-type='method'><a href="module-gpt.html#.loadGptScript">loadGptScript</a></li><li data-type='method'><a href="module-gpt.html#.refresh">refresh</a></li><li data-type='method'><a href="module-gpt.html#.setTargeting">setTargeting</a></li></ul></li><li><a href="module-options.html">options</a><ul class='methods'><li data-type='method'><a href="module-options.html#.validateOptions">validateOptions</a></li></ul></li><li><a href="module-ready.html">ready</a><ul class='methods'><li data-type='method'><a href="module-ready.html#.addReadyConditions">addReadyConditions</a></li><li data-type='method'><a href="module-ready.html#.getReadyCondition">getReadyCondition</a></li><li data-type='method'><a href="module-ready.html#.isReady">isReady</a></li><li data-type='method'><a href="module-ready.html#.removeReadyCondition">removeReadyCondition</a></li><li data-type='method'><a href="module-ready.html#.setReadyCondition">setReadyCondition</a></li></ul></li><li><a href="module-script.html">script</a><ul class='methods'><li data-type='method'><a href="module-script.html#.loadScriptAsync">loadScriptAsync</a></li></ul></li><li><a href="module-validators.html">validators</a><ul class='methods'><li data-type='method'><a href="module-validators.html#.getLength">getLength</a></li><li data-type='method'><a href="module-validators.html#.hasLength">hasLength</a></li><li data-type='method'><a href="module-validators.html#.isArray">isArray</a></li><li data-type='method'><a href="module-validators.html#.isArrayOfNumbers">isArrayOfNumbers</a></li><li data-type='method'><a href="module-validators.html#.isBetween">isBetween</a></li><li data-type='method'><a href="module-validators.html#.isNegative">isNegative</a></li><li data-type='method'><a href="module-validators.html#.isNotEmptyArray">isNotEmptyArray</a></li><li data-type='method'><a href="module-validators.html#.isNotEmptyString">isNotEmptyString</a></li><li data-type='method'><a href="module-validators.html#.isNotNumeric">isNotNumeric</a></li><li data-type='method'><a href="module-validators.html#.isNumeric">isNumeric</a></li><li data-type='method'><a href="module-validators.html#.isObject">isObject</a></li><li data-type='method'><a href="module-validators.html#.isPositive">isPositive</a></li><li data-type='method'><a href="module-validators.html#.isString">isString</a></li><li data-type='method'><a href="module-validators.html#.isValidTargetingOptions">isValidTargetingOptions</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#backgroundColor">backgroundColor</a></li><li><a href="global.html#createLogger">createLogger</a></li><li><a href="global.html#dispatch">dispatch</a></li><li><a href="global.html#hslStr">hslStr</a></li><li><a href="global.html#selectColor">selectColor</a></li><li><a href="global.html#subscribe">subscribe</a></li><li><a href="global.html#useColors">useColors</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">log.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import path from 'rambda/lib/path';

const colorSupport = useColors();
const prefixes = [];

/**
 * Basic logger that preserves line numbers in browsers, supports prefixes and has pretty colors in supported browsers
 * @param {string} prefix Prefix for log messages
 * @returns {function} Colorized log function that prefixes all statements
 */
export function createLogger(prefix) {
  const debug = window &amp;&amp; path('localStorage.debug', window);
  if (
    debug &amp;&amp;
    (prefix === debug ||
      (debug.endsWith('*') &amp;&amp;
        prefix.startsWith(debug.substr(0, debug.length - 1))))
  ) {
    if (colorSupport) {
      const color = selectColor(prefix);
      const colorStr = hslStr(color);
      const bgColorStr = hslStr(backgroundColor(color));
      return Function.prototype.bind.call(
        console.log,
        console,
        `%c${prefix}`,
        `color: ${colorStr}; background-color: ${bgColorStr}; padding-left: 5px; padding-right: 5px;`
      );
    }
    return Function.prototype.bind.call(console.log, console, prefix);
  }
  return () => null;
}

/**
 * Select a color.
 * @param {string} prefix Prefix to create color for
 * @return {array} [H, S, L] color array
 */
function selectColor(prefix) {
  let index = prefixes.indexOf(prefix);
  if (index === -1) {
    index = prefixes.push(prefix);
  }
  // Amount to increment hue on each iteration
  const increment = 30;

  // Alternate to opposite hue on every other iteration
  const alt = index % 2 ? 128 : 0;

  // Calculate hue
  const h = (index * increment + alt) % 255;

  // Alternate between full and half saturation on every cycle through the hue spectrum
  const s = Math.floor(index * increment / 255) % 2 ? 50 : 100;
  return [h, s, 40];
}
/**
 * Convert HSL array to hsl() string usable as a CSS color value
 * @param {array} hslArray [H, S, L] Color array
 * @returns {string} hsl() string
 */
function hslStr(hslArray) {
  return `hsl(${hslArray[0]},${hslArray[1]}%,${hslArray[2]}%)`;
}

/**
 * Create a light background color from a color made by selectColor()
 * @param {array} hslArray HSL color to create beckground for
 * @returns {array} [H, S, L] Color array
 */
function backgroundColor(hslArray) {
  return [hslArray[0], hslArray[1], 94];
}

/**
 * Check if current browser supports console color styling
 * @returns {boolean} True if colors are supported
 */
function useColors() {
  // NB: In an Electron preload script, document will be defined but not fully
  // initialized. Since we know we're in Chrome, we'll just detect this case
  // explicitly
  if (
    typeof window !== 'undefined' &amp;&amp;
    window.process &amp;&amp;
    window.process.type === 'renderer'
  ) {
    return true;
  }

  // Internet Explorer and Edge do not support colors.
  if (
    typeof navigator !== 'undefined' &amp;&amp;
    navigator.userAgent &amp;&amp;
    navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)
  ) {
    return false;
  }

  // is webkit? http://stackoverflow.com/a/16459606/376773
  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
  return (
    (typeof document !== 'undefined' &amp;&amp;
      document.documentElement &amp;&amp;
      document.documentElement.style &amp;&amp;
      document.documentElement.style.WebkitAppearance) ||
    // is firebug? http://stackoverflow.com/a/398120/376773
    (typeof window !== 'undefined' &amp;&amp;
      window.console &amp;&amp;
      (window.console.firebug ||
        (window.console.exception &amp;&amp; window.console.table))) ||
    // is firefox >= v31?
    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
    (typeof navigator !== 'undefined' &amp;&amp;
      navigator.userAgent &amp;&amp;
      navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) &amp;&amp;
      parseInt(RegExp.$1, 10) >= 31) ||
    // double check webkit in userAgent just in case we are in a worker
    (typeof navigator !== 'undefined' &amp;&amp;
      navigator.userAgent &amp;&amp;
      navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))
  );
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jan 30 2018 15:38:00 GMT+0100 (CET) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
